@model IEnumerable<C.Models.Calificacione>

@{
    ViewData["Title"] = "Gestión de Calificaciones";
}

<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="index-tab" data-toggle="tab" href="#index" role="tab" aria-controls="index" aria-selected="true">Index</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="menores-tab" data-toggle="tab" href="#menores" role="tab" aria-controls="menores" aria-selected="false">Alumnos con Notas Menores a 6</a>
    </li>
</ul>

<div class="tab-content" id="myTabContent">
    <!-- Tabla para el índice de calificaciones -->
    <div class="tab-pane fade show active" id="index" role="tabpanel" aria-labelledby="index-tab">
        <h1>Index</h1>
        <p>
            <a asp-action="Create">Create New</a>
        </p>
        <table class="table">
            <thead>
                <tr>
                    <th>@Html.DisplayNameFor(model => model.Nota1)</th>
                    <th>@Html.DisplayNameFor(model => model.Nota2)</th>
                    <th>@Html.DisplayNameFor(model => model.Nota3)</th>
                    <th>@Html.DisplayNameFor(model => model.NotaFinal)</th>
                    <th>@Html.DisplayNameFor(model => model.NotaExtra)</th>
                    <th>@Html.DisplayNameFor(model => model.Materia)</th>
                    <th>@Html.DisplayNameFor(model => model.Usuario)</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => item.Nota1)</td>
                        <td>@Html.DisplayFor(modelItem => item.Nota2)</td>
                        <td>@Html.DisplayFor(modelItem => item.Nota3)</td>
                        <td>@Html.DisplayFor(modelItem => item.NotaFinal)</td>
                        <td>@Html.DisplayFor(modelItem => item.NotaExtra)</td>
                        <td>@Html.DisplayFor(modelItem => item.Materia.MateriaId)</td>
                        <td>@Html.DisplayFor(modelItem => item.Usuario.UsuarioId)</td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@item.CalificacionId">Edit</a> |
                            <a asp-action="Details" asp-route-id="@item.CalificacionId">Details</a> |
                            <a asp-action="Delete" asp-route-id="@item.CalificacionId">Delete</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Tabla para alumnos con notas menores a 6 -->
    <div class="tab-pane fade" id="menores" role="tabpanel" aria-labelledby="menores-tab">
        <h1>Alumnos con Notas Menores a 6</h1>
        <table class="table">
            <thead>
                <tr>
                    <th>Estudiante</th>
                    <th>Materia</th>
                    <th>Nota 1</th>
                    <th>Nota 2</th>
                    <th>Nota 3</th>
                    <th>Nota Final</th>
                    <th>Nota Extra Necesaria</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var calificacion in Model)
                {
                    if (calificacion.NotaFinal < 6)
                    {
                        <tr>
                            <td>@calificacion.Usuario.UsuarioId</td>
                            <td>@calificacion.Materia.MateriaId</td>
                            <td>@calificacion.Nota1</td>
                            <td>@calificacion.Nota2</td>
                            <td>@calificacion.Nota3</td>
                            <td>@calificacion.NotaFinal</td>
                            <td>@calificacion.NotaExtra</td>
                            <td>
                                <a asp-action="Edit" asp-route-id="@calificacion.CalificacionId">Edit</a> |
                                <a asp-action="Details" asp-route-id="@calificacion.CalificacionId">Details</a> |
                                <a asp-action="Delete" asp-route-id="@calificacion.CalificacionId">Delete</a>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script>
        $(function () {
            $('#myTab a:first').tab('show');
        });
    </script>
}
